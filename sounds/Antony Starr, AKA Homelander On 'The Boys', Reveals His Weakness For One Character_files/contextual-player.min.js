var pmc_contextual_player={player_main_div:".pmc-contextual-player",message_pattern:"pmcadm:dfp:isdirect=true",init:function(){this.bind_events()},bind_events:function(){var self=this;self.pause_triggered=false;jQuery(window).on("message",function(wrappedEvent){var event=wrappedEvent.originalEvent;if("string"===typeof event.data){if(event.data.substring(0,self.message_pattern.length)===self.message_pattern){if("object"!==typeof pmc_adm_config||"string"!==typeof pmc_adm_config.contextual_on_direct_sold||"show"!==pmc_adm_config.contextual_on_direct_sold){self.remove_contextual_player()}}else if(event.data==="pmc_show_interrupt_ads"){if(window.contextual_player){try{if(window.contextual_player.getState()!=="playing"){var jwconfig=window.contextual_player.getConfig();if(jwconfig.autostart==="viewable"&&jwconfig.viewable){self.pause_triggered=true}}else{self.pause_triggered=true}if(self.pause_triggered){window.contextual_player.pause()}}catch(e){}}}else if(event.data==="pmc_hide_interrupt_ads"){if(self.pause_triggered){window.contextual_player.play();self.pause_triggered=false}}}});if("object"===typeof contextual_player){contextual_player.on("play",self.current_playing);contextual_player.on("adPlay",self.current_playing);contextual_player.on("relatedReady",function(){var relatedPlugin=contextual_player.getPlugin("related");if("object"===typeof relatedPlugin){relatedPlugin.on("feedShown",function(){self.create_playlist_nav();jQuery(".pmc-contextual-player .jw-related-control").on("click",self.current_playing)})}});contextual_player.on("ready",function(){var relatedPlugin=contextual_player.getPlugin("related");if("object"===typeof relatedPlugin){relatedPlugin.on("feedShown",function(){self.create_playlist_nav();jQuery(".pmc-contextual-player .jw-related-control").on("click",self.current_playing)})}})}},remove_contextual_player:function(){var player=jQuery(this.player_main_div);if(0<player.length){player.remove()}},current_playing:function(){var playlist_index,current_item,all_item,now_playing;playlist_index=contextual_player.getPlaylistIndex();all_item=jQuery(".pmc-contextual-player .jw-related-shelf-item.is-active").removeClass("is-active");current_item=jQuery(".pmc-contextual-player .jw-related-shelf-item[data-jw-index="+playlist_index+"]");now_playing=jQuery('<div class="contextual-self-now-playing">VIEWING</div>');if("object"===typeof current_item&&1===current_item.length){current_item.addClass("is-active")}if(0===jQuery(".jw-related-shelf-item[data-jw-index="+playlist_index+"] .contextual-self-now-playing").length){current_item.find(".jw-related-shelf-item-image").append(now_playing)}},create_playlist_nav:function(){if(0===jQuery(".pmc-contextual-player .l-adm-contextual-video__shadow").length){var shadow_left=jQuery('<div class="l-adm-contextual-video__shadow l-adm-contextual-video__shadow-left"></div>'),shadow_right=jQuery('<div class="l-adm-contextual-video__shadow l-adm-contextual-video__shadow-right"></div>');jQuery(".pmc-contextual-player .jw-related-control-left").prepend(shadow_left);jQuery(".pmc-contextual-player .jw-related-control-right").prepend(shadow_right)}}};pmc_contextual_player.init();