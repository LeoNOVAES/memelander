document.addEventListener("DOMContentLoaded",(()=>{({seconds_range:{_5:5,_10:10,_30:30,_60:60,_90:90,_120:120,_300:300,_600:600},percent_range:{_5:5,_10:10,_25:25,_50:50,_75:75,_95:95},players:{},event_list:{},player_prefix:"yt_",target_selector:[".youtube-player",".c-player__thumb > iframe",".c-pvm-player__thumb > iframe"],init:function(){window.pmc_video_player_event_tracking&&(window.onYouTubeIframeAPIReady=this.onYouTubeIframeAPIReady.bind(this),this.event_list=window.pmc_video_player_event_tracking)},onYouTubeIframeAPIReady:function(){const e=this;this.target_selector.forEach((t=>{const a=document.querySelectorAll(t);a.length&&[...a].forEach((t=>{"complete"===t.contentDocument.readyState||"interactive"===t.contentDocument.readyState?(t.dataset.autoplay=!0,e.init_player(t)):t.addEventListener("load",(()=>{t.dataset.autoplay=!1,e.init_player(t)}))}))}))},init_player:function(e){let t="";const a=window.YT||a;e.id&&"object"==typeof a&&(t=a.get(e.id)),t||"object"!=typeof a?(t.addEventListener("onReady",this.on_player_ready.bind(this)),t.addEventListener("onStateChange",this.on_player_state_change.bind(this)),t.addEventListener("onError",this.on_player_error.bind(this))):new a.Player(e,{events:{onReady:this.on_player_ready.bind(this),onStateChange:this.on_player_state_change.bind(this),onError:this.on_player_error.bind(this)}})},on_player_ready:function(e){const t=this;this.reset_player(e.target),e.target.getIframe().addEventListener("yt-player:stop",(()=>{t.on_player_stop(e.target)})),e.target.getIframe().addEventListener("yt-player:play",(()=>{e.target.playVideo()}))},on_player_state_change:function(e){const t=this.get_player_video_id(e.target);if(e.data||0===e.data)switch(t&&(this.players[t].status=e.data),e.data){case 0:this.on_player_video_ended(e);break;case 1:this.start_player_interval(e);break;case 2:this.on_player_paused(e);break;case 3:this.players[t].last_status=e.data}},on_player_error:function(e){const t=this.get_concatenated_label(e.target);"1"===this.event_list.basic.error&&t&&this.send_ga_event(e.target,"error",this.player_prefix+Math.floor(e.target.getCurrentTime())+"_"+t,!1)},on_player_stop:function(e){const t=this.get_player_video_id(e);e.stopVideo(),this.reset_player(e),this.players[t].last_status=2},on_player_paused:function(e){const t=this.get_concatenated_label(e.target),a=this.get_player_video_id(e.target);let s=0,r=0,i=0;a&&(s=e.target.getCurrentTime(),r=this.players[a].time_played,i=s-r,clearInterval(this.players[a].int_id),t&&2===this.players[a].status&&"1"===this.event_list.advanced.pause&&6>=Math.abs(i)&&this.send_ga_event(e.target,"press-pause",this.player_prefix+Math.floor(e.target.getCurrentTime())+"_"+t,!1),this.players[a].last_status=2,this.players[a].time_played=s)},on_player_video_ended:function(e){var t=this.get_concatenated_label(e.target),a=this.get_player_video_id(e.target);a&&(clearInterval(this.players[a].int_id),t&&"1"===this.event_list.basic._100_percent_played&&this.send_ga_event(e.target,"100-percent-played",this.player_prefix+t,!1),this.players[a].last_status=0)},start_player_interval:function(e){var t=this,a=this.get_player_video_id(e.target),s=this.get_concatenated_label(e.target),r=e.target.getCurrentTime();s&&(this.players[a].int_id=setInterval((function(){t.extract_player_data(e)}),5e3),this.players[a].is_autoplay&&!this.players[a].is_autoplay_sent&&"1"===this.event_list.basic.autoplay&&(this.send_ga_event(e.target,"autoplay",this.player_prefix+s,!0),this.players[a].is_autoplay_sent=!0),(!this.players[a].is_autoplay&&-1===this.players[a].last_status||2===this.players[a].last_status)&&1===this.players[a].status&&"1"===this.event_list.basic.play&&this.send_ga_event(e.target,"press-play",this.player_prefix+Math.floor(e.target.getCurrentTime())+"_"+s,!1),this.players[a].last_status=1,this.players[a].time_played=r)},extract_player_data:function(e){this.seconds_played(e),this.percent_played(e),this.volume_changed(e),this.is_mute(e)},seconds_played:function(e){const t=this,a=e.target.getCurrentTime(),s=this.get_concatenated_label(e.target),r=this.get_player_video_id(e.target);if(!s)return;const i=this.players[r].time_played,n=a-i;10<=n?"1"===this.event_list.advanced.jump_forward&&this.send_ga_event(e.target,"jump-forward",this.player_prefix+"from"+Math.floor(i)+"to"+Math.floor(a)+"_"+s,!1):-10>=n&&"1"===this.event_list.advanced.jump_backward&&this.send_ga_event(e.target,"jump-backward",this.player_prefix+"from"+Math.floor(i)+"to"+Math.floor(a)+"_"+s,!1),this.players[r].seconds_range.forEach(((i,n)=>{a>i&&("_30"===n&&"1"===t.event_list.basic.content_consumed&&!1===t.players[r].is_content_consumed_sent&&(t.send_ga_event(e.target,"content-consumed",t.player_prefix+s,!1),t.players[r].is_content_consumed_sent=!0),"1"===t.event_list.advanced.seconds_played[n]&&(t.send_ga_event(e.target,n.slice(1)+"-seconds-played",t.player_prefix+s,!1),delete t.players[r].seconds_range[n]))})),this.players[r].time_played=a},percent_played:function(e){const t=this,a=e.target.getCurrentTime(),s=this.get_concatenated_label(e.target),r=this.get_player_video_id(e.target);if(!s)return;const i=this.players[r].percent_range,n=100*a/this.players[r].duration;i.forEach(((a,i)=>{n>a&&"1"===t.event_list.advanced.percent_played[i]&&(t.send_ga_event(e.target,i.slice(1)+"-percent-played",t.player_prefix+s,!1),delete t.players[r].percent_range[i])}))},volume_changed:function(e){var t=this.get_player_volume(e.target),a=this.get_concatenated_label(e.target),s=this.get_player_video_id(e.target);if(a){var r=t-this.players[s].volume;0<r?"1"===this.event_list.advanced.volume_up&&this.send_ga_event(e.target,"press-volume-up",this.player_prefix+Math.floor(e.target.getCurrentTime())+"_"+a,!1):0>r&&"1"===this.event_list.advanced.volume_down&&this.send_ga_event(e.target,"press-volume-down",this.player_prefix+Math.floor(e.target.getCurrentTime())+"_"+a,!1),this.players[s].volume=t}},is_mute:function(e){const t=this.is_player_mute(e.target),a=this.get_concatenated_label(e.target),s=this.get_player_video_id(e.target);t!==this.players[s].is_mute&&(t&&"1"===this.event_list.advanced.mute?this.send_ga_event(e.target,"press-mute",this.player_prefix+Math.floor(e.target.getCurrentTime())+"_"+a,!1):t||"1"!==this.event_list.advanced.unmute||this.send_ga_event(e.target,"press-unmute",this.player_prefix+Math.floor(e.target.getCurrentTime())+"_"+a,!1),this.players[s].is_mute=t)},get_player_video_id:function(e){const t=e.getVideoData();return!!t.video_id&&t.video_id},get_player_video_name:function(e){let t=e.getVideoData().title;return t=t.replace(/[\W_]+/g,"-"),!!t&&t.toLowerCase()},get_concatenated_label:function(e){const t=this.get_player_video_name(e),a=this.get_player_video_id(e);return!(!t||!a)&&a+"_"+t},get_video_duration:function(e){return e.getDuration()},get_player_volume:function(e){return e.getVolume()},is_player_mute:function(e){return e.isMuted()},send_ga_event:function(e,t,a,s){window.pmc&&window.pmc.event_tracking&&window.pmc.event_tracking(e,t,"video",a,!1,!1,s)},reset_player:function(e){const t=this.get_player_video_id(e),a=e.getIframe();t&&(this.players[t]={status:-1,last_status:-1,seconds_range:Object.assign({},this.seconds_range),percent_range:Object.assign({},this.percent_range),int_id:0,duration:this.get_video_duration(e),volume:this.get_player_volume(e),is_mute:this.is_player_mute(e),time_played:0,is_autoplay:a.dataset.autoplay,is_autoplay_sent:!1,is_content_consumed_sent:!1})}}).init()}));